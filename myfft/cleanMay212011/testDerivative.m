function void =testDerivative()
global Sigma Rate Delta D N Left Right  %for testing purpose
mu=(Rate-0.5*Sigma^2)*Delta;
std=Delta^0.5*Sigma;
%x=D(2:N/2);%+D(1:N/2-1))/2;
x=(D(2:N/2)+D(1:N/2-1))/2;
xx=(x-mu)/std;

%((D(2:N/2)-mu)/std+(D(1:N/2-1)-mu)/std)/2;

val0=normcdf(xx);
y0=zeros(1,N/2-1);
for i=1:N/2-1;
    y0(i)=GetDerivative(x(i), 0);
end
max(abs(y0-val0))


val1= exp(-0.5*((x-mu)/std).^2)/((2*pi)^0.5*std);
y1=zeros(1,N/2-1);
for i=1:N/2-1;
    y1(i)=GetDerivative(x(i), 1);
end
max(abs(y1-val1))

val2=-val1.*(x-mu)/std^2;
y2=zeros(1,N/2-1);
for i=1:N/2-1;
    y2(i)=GetDerivative(x(i), 2);
end
max(abs(y2-val2))

val3=-val2.*(x-mu)/std^2-val1/std^2;
y3=zeros(1,N/2-1);
for i=1:N/2-1;
    y3(i)=GetDerivative(x(i), 3);
end
max(abs(y3-val3))

val4=-val3.*(x-mu)/std^2-2*val2/std^2;
y4=zeros(1,N/2-1);
for i=1:N/2-1;
    y4(i)=GetDerivative(x(i), 4);
end
max(abs(y4-val4))

%[-1, 1] 
%N=2^16
%1.110223024625157e-015
%3.730349362740526e-014
%2.650324404385174e-012
%4.292814992368221e-010
%3.808084875345230e-005

%N=2^15
%1.110223024625157e-015
%3.730349362740526e-014
%2.643218977027573e-012
%7.610651664435864e-009
%6.091333925724030e-004
%N=2^14
%1.110223024625157e-015
%3.552713678800501e-014
%6.707523425575346e-012
%2.381129888817668e-007
%0.00974608212709
%N=2^13
%1.110223024625157e-015
%3.552713678800501e-014
%3.116156221949495e-010
%7.613452908117324e-006
%0.15591597370803

%N=2^12
%9.992007221626409e-016
%1.360689338980592e-012
%1.982584763027262e-008
%2.435865389998071e-004
%2.49413345474750

%N=2^11
%2.242650509742816e-014
%1.769357993453014e-010
%1.268410187549307e-006
%0.00779339084693
%39.90301892906427

%N=2^10
%5.530242930262830e-012
%2.264817311470324e-008
%8.116278058878379e-005
%0.24928313524288
%6.379222038090229e+002

%N=2^9
%1.413602485067500e-009
%2.893335754095006e-006
%0.00518017831280
%7.94535282766810
%1.014546671040356e+004
